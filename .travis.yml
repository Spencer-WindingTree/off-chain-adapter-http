dist: trusty
sudo: false
group: beta
language: node_js
node_js:
- 10.3.0
jobs:
  include:
  - stage: test
    script:
    - set -e
    - npm run flow
    - npm run lint
    - npm run test
    - npm run coverage
  - stage: NPM release
    if: tag IS present
    script: echo 'Deploying to NPM...'
    before_deploy: npm run build
    deploy:
      provider: npm
      email: chadima.jiri@gmail.com
      skip_cleanup: true
      api_key: "$NPM_TOKEN"
      on:
        repo: windingtree/off-chain-adapter-http
        tags: true
env:
  global:
    secure: N3mrVYDN3LGiXVzY7YUxqJvb2BfDat/YST+gruOEOPiYe8WKzrx+wfZ4wX6HytQZ2TEhURm5NMPkHNi27sw0q9G/W0QyPSpGdg2cLxxWA34ft+wM0IUPIcny7sQep7HsS7mNzS/CPsoTHIJtOFCHXnUFp/l4e9SNmgoo1TSPvnUZKldpPxCqoAoL3P6ZfN/kAD1SeyVRMYxUWzlybG/GMw84VmyQivIs0xtiS0tRQBp7pMYvxrEoOTYwqMKI+ionAOBNtiuNxxIJcv2J8VfaeTaR5pe+7+VXADE7RJWQ0KmPbP+uAlhNNc/6eO9mcH8F/bwPUnsh9PNs2vHU9BXt/ICrhVmCAECc3+bFFTmiCXSbAl+DdlSL5D/lFmhE9/7dV5NpUQ1mplg3xv74NYf33pTYOKeloPz6A0pk2NbOB4irBsjgPSmBsA84kJN2X5m9znxV2Hmi8s9PrcavRqQFYPJixHy0nG+t3tMs3TuGruA/aA531EYcx6n3QMEJ91jJ+2Jwv8FirM0uAau5J24Ra4umyLG0zt8j7YDrwiuCpUXakD4cW5PTYRPVcGZ5ZBSaFcONeExPqVn9txvhyaEA0bJ4ijulRoi8g1/7ygh+7lxpq/wpA52Nt6mPZ9kyV3OniRCumTg0G7pg4yOP3VZcuDOLEvNhJZm5DayddIrR9zc=
